version: "1.0"
last_updated: "2026-01-29"
milestones:
  - id: M1
    title: DAG Introspection
    description: just dag-status shows real data from task-graph.yaml
    status: complete
  - id: M2
    title: Frontmatter Scanning
    description: just dag-refresh reads and validates document frontmatter
    status: complete
  - id: M3
    title: Basic Prompt Generation
    description: just prompt selects task and outputs usable prompt
    status: complete
  - id: M4
    title: Task Lifecycle
    description: Task claiming, completion, and recovery mechanisms
    status: complete
  - id: M5
    title: Worktree Commands
    description: just worktree-* commands for parallel development
    status: complete
  - id: M6
    title: Ralph Loop
    description: just ralph runs autonomous agent loop
    status: complete
  - id: M7
    title: Solar Engine
    description: Core sun position and sun hours calculations
    status: complete
  - id: M8
    title: Location System
    description: Geocoding, coordinate handling, and location UI
    status: complete
  - id: M9
    title: Application Integration
    description: Results page displaying sun data for a location
    status: complete
  - id: M10
    title: Shade Modeling
    description: Calculate effective sun hours accounting for obstacles
    status: complete
  - id: M11
    title: Climate Integration
    description: Frost dates, growing seasons, and hardiness zones
    status: complete
stories: []
nodes:
  - id: T-018-01
    title: Research enhanced climate data and map picker
    story: S-018
    description: See docs/active/tickets/T-018-01-climate-location-research.md for details.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: docs/knowledge/research/enhanced-climate.md
    path: docs/active/tickets/T-018-01-climate-location-research.md
  - id: T-018-02
    title: Build Leaflet map picker component
    story: S-018
    description: Create `src/lib/components/MapPicker.svelte` that renders an interactive map where users can click to select a location, search with autocomplete, or use GPS.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/lib/components/MapPicker.svelte
    path: docs/active/tickets/T-018-02-map-picker-component.md
  - id: T-018-03
    title: Implement Open-Meteo historical weather client
    story: S-018
    description: Create `src/lib/climate/openmeteo.ts` with functions to fetch historical daily temperature data and compute climate metrics from it.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/lib/climate/openmeteo.ts
    path: docs/active/tickets/T-018-03-openmeteo-client.md
  - id: T-018-04
    title: Implement Köppen climate classification
    story: S-018
    description: Create `src/lib/climate/koppen.ts` with functions to determine Köppen climate type from monthly climate data.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/lib/climate/koppen.ts
    path: docs/active/tickets/T-018-04-koppen-classification.md
  - id: T-018-05
    title: Add seasonal weather outlook and anomaly display
    story: S-018
    description: Long-term "zones are shifting" messaging is less actionable than knowing "this winter has been 10°F warmer than normal and the 3-month outlook shows continued above-normal temps." Gardeners establishing new plantings need to know about current anomalies and near-term patterns, not just historical averages.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/lib/climate/outlook.ts
    path: docs/active/tickets/T-018-05-climate-trends.md
  - id: T-018-06
    title: Create monthly temperature chart component
    story: S-018
    description: Create `src/lib/components/TemperatureChart.svelte` that shows a year's worth of temperature patterns.
    priority: 1
    complexity: S
    status: complete
    assignee: null
    output: src/lib/components/TemperatureChart.svelte
    path: docs/active/tickets/T-018-06-temperature-chart.md
  - id: T-018-07
    title: Update LocationInput to use map picker
    story: S-018
    description: Update `src/lib/components/LocationInput.svelte` to use MapPicker as the default input method, while keeping the existing search and coordinates modes as alternatives.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/lib/components/LocationInput.svelte
    path: docs/active/tickets/T-018-07-location-input-update.md
  - id: T-018-08
    title: Update results page with enhanced climate display
    story: S-018
    description: Update `src/routes/results/+page.svelte` to display Köppen classification, monthly temperatures, and climate trends alongside existing climate data.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: src/routes/results/+page.svelte
    path: docs/active/tickets/T-018-08-climate-display-update.md
  - id: T-019-01
    title: Research full app integration approach
    story: S-019
    description: |-
      The following components exist but are not wired together:

      | Component | Location | Purpose |
      |-----------|----------|---------|
      | PlotViewer | `src/lib/components/PlotViewer.svelte` | Wraps PlotEditor + IsometricView + TimeScrubber |
      | PlotEditor | `src/lib/components/PlotEditor.svelte` | Obstacle placement UI |
      | IsometricView | `src/lib/components/IsometricView.svelte` | 3D shadow visualization |
      | TimeScrubber | `src/lib/components/TimeScrubber.svelte` | Time control for shadow animation |
      | Results page | `src/routes/results/+page.svelte` | Shows sun data, climate, recommendations |
      | Shade calc | `src/lib/solar/sun-hours-shade.ts` | Calculates effective sun hours with obstacles |
      | Recommendations | `src/lib/plants/recommendations.ts` | Generates plant suggestions |

      The results page currently shows theoretical sun hours. It needs to incorporate obstacle/slope data and show effective sun hours instead.
    priority: 1
    complexity: M
    status: complete
    assignee: null
    output: docs/knowledge/research/app-integration.md
    path: docs/active/tickets/T-019-01-integration-research.md
  - id: T-019-02
    title: Integrate PlotViewer into results page
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` identified the integration point and data flow. PlotViewer should appear between the sun data card (line 124) and climate data section (line 126) in `src/routes/results/+page.svelte`.
    priority: 1
    complexity: M
    status: ready
    assignee: null
    output: src/routes/results/+page.svelte
    path: docs/active/tickets/T-019-02-plotviewer-integration.md
  - id: T-019-03
    title: Connect shade calculations to recommendations
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` section R3 documents the shade calculation API. The key function is `getDailySunHoursWithShade()` at `sun-hours-shade.ts:54-108`.
    priority: 1
    complexity: M
    status: pending
    assignee: null
    output: src/routes/results/+page.svelte
    path: docs/active/tickets/T-019-03-shade-adjusted-recommendations.md
  - id: T-019-04
    title: Calculate monthly shade data for seasonal chart
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` section R3 documents `getSeasonalSummaryWithShade()` at `sun-hours-shade.ts:261-332` for calculating shade impact across date ranges.
    priority: 1
    complexity: M
    status: pending
    assignee: null
    output: src/routes/results/+page.svelte
    path: docs/active/tickets/T-019-04-monthly-shade-calculation.md
  - id: T-019-05
    title: Add localStorage persistence for plot data
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` section R4 documents the persistence strategy with key format and Svelte 5 patterns.
    priority: 1
    complexity: S
    status: pending
    assignee: null
    output: src/routes/results/+page.svelte
    path: docs/active/tickets/T-019-05-localstorage-persistence.md
  - id: T-019-06
    title: Optimize PlotViewer for mobile layout
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` section R5 documents that PlotViewer has a 600px minimum height which consumes the entire viewport on phones. The recommended approach is a collapsed state that expands on tap.
    priority: 1
    complexity: M
    status: pending
    assignee: null
    output: src/lib/components/PlotViewer.svelte
    path: docs/active/tickets/T-019-06-mobile-layout.md
  - id: T-019-07
    title: Add integration tests for full flow
    story: S-019
    description: Research at `docs/knowledge/research/app-integration.md` section R6 identified gaps in test coverage. Existing tests cover shade calculations and recommendations separately but not the integrated flow.
    priority: 1
    complexity: M
    status: pending
    assignee: null
    output: src/lib/integration/results-integration.test.ts
    path: docs/active/tickets/T-019-07-integration-testing.md
edges:
  - from: T-018-01
    to: T-018-02
  - from: T-018-01
    to: T-018-03
  - from: T-018-03
    to: T-018-04
  - from: T-018-01
    to: T-018-05
  - from: T-018-03
    to: T-018-06
  - from: T-018-02
    to: T-018-07
  - from: T-018-04
    to: T-018-08
  - from: T-018-05
    to: T-018-08
  - from: T-018-06
    to: T-018-08
  - from: T-019-01
    to: T-019-02
  - from: T-019-02
    to: T-019-03
  - from: T-019-03
    to: T-019-04
  - from: T-019-02
    to: T-019-05
  - from: T-019-02
    to: T-019-06
  - from: T-019-03
    to: T-019-07
  - from: T-019-04
    to: T-019-07
  - from: T-019-05
    to: T-019-07
meta:
  total_stories: 0
  total_tasks: 15
  total_milestones: 11
  by_status:
    ready: 1
    pending: 5
    in_progress: 0
    complete: 9
    blocked: 0
  by_priority: {}
  by_milestone: {}
